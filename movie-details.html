<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>RaiderTix – Movie Details</title>
    <link rel="stylesheet" href="./css/movie-details.css" />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/boxicons@latest/css/boxicons.min.css"
    />
  </head>

  <body class="page">
    <!-- Navbar  -->
    <header>
      <a href="./index.html" class="logo">
        <img
          src="./img/raidertix-high-resolution-logo-transparent (1).png"
          alt="RaiderTix logo"
        />
      </a>
      <div class="bx bx-menu" id="menu-icon"></div>

      <!-- menu  -->
      <ul class="navbar">
        <li><a href="./index.html" class="home-active">Home</a></li>
        <li><a href="./index.html">Browse Full Catalog</a></li>
        <li><a href="./index.html">Upcoming Films</a></li>
      </ul>

      <div class="search-bar">
        <input type="text" id="searchInput" placeholder="Search movies..." />
      </div>

      <!-- Sign In Button (for signed out users) -->
      <a href="login.html" class="btn" id="signInBtn" style="margin-left: 16px">Sign In</a>
      
      <!-- User Dropdown (for signed in users) -->
      <div
        class="user-info"
        style="display: none; position: relative; margin-left: 16px"
      >
        <div
          style="
            display: flex;
            align-items: center;
            gap: 40px;
            margin-left: 20px;
          "
        >
          <div
            class="cart-icon"
            id="cartIcon"
            style="display: none; position: relative; cursor: pointer"
          >
            <i class="bx bx-cart" style="color: white; font-size: 24px"></i>
            <span
              id="cartBadge"
              style="
                position: absolute;
                top: -6px;
                right: -8px;
                background: red;
                color: white;
                border-radius: 50%;
                padding: 2px 6px;
                font-size: 12px;
                display: none;
              "
              >0</span
            >
          </div>

          <div
            id="userToggle"
            style="
              display: flex;
              align-items: center;
              gap: 8px;
              cursor: pointer;
            "
          >
            <i class="bx bxs-user" style="color: white; font-size: 24px"></i>
            <span id="username" style="color: white; font-weight: 500"
              >Hi, User!</span
            >
            <i class="bx bx-chevron-down" style="color: white"></i>
          </div>
        </div>
        <div
          id="userDropdown"
          style="
            display: none;
            position: absolute;
            top: 100%;
            right: 0;
            background-color: #18181b;
            border: 1px solid #fcd34d;
            border-radius: 8px;
            margin-top: 8px;
            z-index: 100;
            width: 120px;
          "
        >
          <button
            id="signOutBtn"
            style="
              background: transparent;
              color: #fcd34d;
              border: none;
              width: 100%;
              padding: 10px;
              text-align: left;
              cursor: pointer;
              font-weight: 500;
            "
          >
            Sign Out
          </button>
        </div>
      </div>
    </header>

    <!-- Movie Details -->
    <section class="movie-details">
      <!-- Banner -->
      <div id="banner" class="movie-banner"></div>

      <!-- Info -->
      <div class="container movie-info-wrapper">
        <!-- Poster -->
        <div class="poster-container">
          <img
            id="poster"
            src="https://images.unsplash.com/photo-1635805737707-575885ab0820?auto=format&fit=crop&w=800"
            alt="Dr. Strange Poster"
            class="movie-poster"
          />
        </div>

        <!-- Textual Info -->
        <div class="movie-info">
          <!-- Title -->
          <h1 id="title" class="movie-title">Loading…</h1>
          <!-- Meta line (year • rating • runtime • genres) -->
          <div id="meta" class="movie-meta">
            <span>Year</span> • <span>Rating</span> • <span>Runtime</span> •
            <span>Genre</span>
          </div>

          <!-- Synopsis -->
          <p id="synopsis" class="movie-description">Loading synopsis…</p>

          <!-- Cast -->
          <div class="cast-section">
            <h2>Cast</h2>
            <div id="castList" class="cast-list">
              <!-- JS will inject up to 3 cast members here -->
            </div>
          </div>

          <!-- Theater Search -->
          <div class="theater-search">
            <h2>Find Theaters</h2>
            <div class="theater-search-inputs">
              <input
                type="text"
                id="zipcode"
                placeholder="Enter ZIP code"
                class="search-input"
              />
              <button id="searchTheaters" class="btn btn-primary">
                Search
              </button>
            </div>
          </div>

          <!-- Showtimes -->
          <div class="showtimes-section">
            <div class="showtimes-header">
              <h2>Showtimes</h2>
              <select id="dateSelect" class="search-input date-select">
                <!-- dates get populated here -->
              </select>
            </div>
            <div class="theater-list">
              <!-- theater + time buttons get injected here -->
            </div>
          </div>

          <!-- Reviews -->
          <div class="reviews-section">
            <h2>Reviews</h2>

            <!-- review form -->
            <form id="reviewForm" class="review-form">
              <div class="rating-input">
                <input type="radio" id="star5" name="rating" value="5" />
                <label for="star5">★</label>
                <input type="radio" id="star4" name="rating" value="4" />
                <label for="star4">★</label>
                <input type="radio" id="star3" name="rating" value="3" />
                <label for="star3">★</label>
                <input type="radio" id="star2" name="rating" value="2" />
                <label for="star2">★</label>
                <input type="radio" id="star1" name="rating" value="1" />
                <label for="star1">★</label>
              </div>

              <!-- this ID is used by JS to pull out the comment text -->
              <textarea
                id="reviewComment"
                placeholder="Write your review…"
                class="review-textarea"
              ></textarea>

              <button type="submit" class="btn btn-primary">Post Review</button>
            </form>

            <!-- JS will inject all reviews here -->
            <div id="reviewsList" class="reviews-list">
              <!-- all the reviews will be displayed here -->
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
      <div class="container footer-grid">
        <!-- Company Info, Quick Links, Support, Newsletter -->
        <!-- copy your footer content here, just swap utility classes for semantic ones -->
      </div>
      <div class="bottom-bar">
        <p>© 2024 RaiderTix. All rights reserved.</p>
        <div class="footer-links">
          <a href="#">Accessibility</a>
          <a href="#">Cookie Policy</a>
          <a href="#">Sitemap</a>
        </div>
      </div>
    </footer>

    <script src="js/main.js"></script>
    <script src="js/search.js"></script>
    <script type="module" src="js/authState.js" defer></script>
    <script type="module" src="js/movie-details.js"></script>
  </body>
</html>
